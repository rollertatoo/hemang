!function(e){referenceValidation=Class.extend({init:function(){this.getJSON()},getJSON:function(){that=this,e(".references li").on("click","ul.reflinks li:first-child a",(function(t){var i=e(this).attr("data-author"),r=e(this).attr("data-title"),s=e(this).attr("data-cit");if("doi-provided"!==s){var a=e(this),o="https://api.crossref.org/works?query="+(i?"query.author="+i+"&":"")+"query.bibliographic="+r+"&sort=score&rows=1",n="https://search.crossref.org/?q="+s,c=null;t.preventDefault(),e.ajax({url:o,beforeSend:function(){a.addClass("link-disabled")}}).success((function(e){var t=e.message.items[0].DOI;if(c="https://doi.org/"+t,r&&e.message.items[0].title){var i=e.message.items[0].title[0];i.toLowerCase().replace(/[^a-zA-Z0-9]/g,"")!=decodeURIComponent(r).toLowerCase().replace(/[^a-zA-Z0-9]/g,"")&&(console.log("mismatch in title "+i+" != "+decodeURIComponent(r)+"\n, using search query"),c=n)}})).error((function(){c=n})).done((function(){window.open(c,"_blank"),a.removeClass("link-disabled")}))}}))}}),this.articleReferences=new referenceValidation}(jQuery);